From a07077f4737754757e99c2d42267f432289ffd13 Mon Sep 17 00:00:00 2001
From: Magnus Holm <judofyr@gmail.com>
Date: Fri, 24 Jun 2011 10:43:55 +0200
Subject: [PATCH] Fix compilesite test for multiple threads (closes #93)

---
 test/tilt_compilesite_test.rb |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/test/tilt_compilesite_test.rb b/test/tilt_compilesite_test.rb
index 1ba6433..2944c84 100644
--- a/test/tilt_compilesite_test.rb
+++ b/test/tilt_compilesite_test.rb
@@ -39,7 +39,7 @@ class CompileSiteTest < Test::Unit::TestCase
               locals = { "local#{i}" => 'value' }
               res = template.render(self, locals)
               thread_id = Thread.current.object_id
-              res = template.render(self, "local#{thread_id.to_s}" => 'value')
+              res = template.render(self, "local#{thread_id.abs.to_s}" => 'value')
             rescue => boom
               main_thread.raise(boom)
             end
-- 
1.7.5.4

